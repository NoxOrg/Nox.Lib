#
# Country data loader definition
#

Name: CountryLoader

Description: Loads country data 

Schedule:
  Start: Daily at 2am UTC
  Retry:
    Limit: 10
    DelaySeconds: 60
    DoubleDelayLimit: 5

LoadStrategy: 
  Type: MergeNew
  Columns: [CreateDate,EditDate]

Target:
  Entity: Country
  
Messaging:
  - Name: InProcess    

Sources:
  - Name: Titan
    MinimumExpectedRecords: 242 
    Query: >-
      SELECT 
           [CountryISONumber] AS [Id]
          ,[CountryName] AS [Name]
          ,[CountryCodeISO2Alpha] AS [ISO_Alpha2]
          ,[CountryCodeISO3Alpha] AS [ISO_Alpha3]
          ,[CountryISONumber] AS [ISO_Numeric]
          ,[CurrencyID] AS [CurrencyId]
          ,[CreateDate]
          ,[EditDate]
      FROM dbo.Country WITH (NOLOCK)

