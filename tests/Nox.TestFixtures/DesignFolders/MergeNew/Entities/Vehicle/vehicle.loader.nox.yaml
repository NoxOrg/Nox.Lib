#
# Vehicle data loader definition
#

Name: VehicleLoader

Description: Loads vehicle data

Schedule:
  Start: Daily at 2am UTC
  Retry:
    Limit: 10
    DelaySeconds: 60
    DoubleDelayLimit: 5

LoadStrategy:
  Type: MergeNew
  Columns: [CreateDate,EditDate]


Target:
  Entity: Vehicle

Sources:
  - ConnectionVariable: ConnectionString:MasterDataSource
    Provider: SqlServer
    MinimumExpectedRecords: 30
    Query: >-
      SELECT 
           [Id]
          ,[VehicleBrand] AS [Brand]
          ,[VehicleColor] AS [Color]
          ,0 AS [PersonId]
          ,[CreateDate]
          ,[EditDate]
      FROM dbo.SourceVehicle WITH (NOLOCK)
